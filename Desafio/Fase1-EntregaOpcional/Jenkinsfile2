pipeline {
    agent any
    parameters {
        string(name: 'KEYWORD', defaultValue: '', description: 'Palabra clave para filtrar las instancias EC2')
    }
    environment {
        AWS_CREDENTIALS_ID = 'UserJenkins-AWS' // Reemplaza con el ID de tus credenciales
    }
    stages {
        stage('Set execution permissions') {
            steps {
                sh 'chmod +x ./Desafio/Fase1-EntregaOpcional/script2.sh'
            }
        }
        stage('Execution') {
            steps {
                withAWS(credentials: "${AWS_CREDENTIALS_ID}") {
                    script {
                        sh "./Desafio/Fase1-EntregaOpcional/script2.sh $KEYWORD"        
                    }
                }
            }
        }
    }
}
